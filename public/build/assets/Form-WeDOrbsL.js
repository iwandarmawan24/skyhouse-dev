import{d,j as e,p as y,q as L,f as z,L as N,s as F,Z as w,X as k,U as I,t as T}from"./vendor-BnbgrNvg.js";import{A as E}from"./AdminLayout-sVT0_NAf.js";import{c as _,B as r}from"./Button-C9qRTbX8.js";import{C as U,a as D,b as R,d as A,c as H}from"./Card-Dup5Ukx4.js";import{I as g}from"./Input-BiTaUmO9.js";import{L as c}from"./Label-D-CdDNeh.js";import{T as O}from"./Textarea-CzbTjwCv.js";import{M as Z}from"./MediaPicker-Bs1F3hOt.js";import"./Dialog-DwNRdUFJ.js";const C=d.forwardRef(({className:s,...i},l)=>e.jsx(y,{className:_("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...i,ref:l,children:e.jsx(L,{className:_("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));C.displayName=y.displayName;function Y({banner:s}){const i=s!==null,{data:l,setData:n,post:S,processing:v,errors:a}=z({title:s?.title||"",description:s?.description||"",image:null,image_uid:s?.image_uid||null,button_text:s?.button_text||"",button_link:s?.button_link||"",is_active:s?.is_active??!0,_method:i?"PUT":"POST"}),[M,x]=d.useState(!1),[o,j]=d.useState(s?.banner_image||null),[m,f]=d.useState(()=>s?.image?s.image.startsWith("http")?s.image:`/storage/${s.image}`:s?.image_url||null),[P,p]=d.useState(!1),[h,u]=d.useState(1),B=t=>{t.preventDefault();const b=i?`/admin/hero-banners/${s.uid}`:"/admin/hero-banners";console.log("Submitting to URL:",b),S(b)};return e.jsxs(E,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(r,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(N,{href:"/admin/hero-banners",children:e.jsx(F,{className:"h-5 w-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:i?"Edit Hero Banner":"Create Hero Banner"}),e.jsx("p",{className:"text-muted-foreground",children:i?"Update banner details":"Add a new banner to the homepage carousel"})]})]}),e.jsxs("form",{onSubmit:B,children:[e.jsxs(U,{children:[e.jsxs(D,{children:[e.jsx(R,{children:"Banner Details"}),e.jsxs(A,{children:["Fill in the information below to"," ",i?"update":"create"," a hero banner"]})]}),e.jsxs(H,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"title",children:["Title"," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(g,{id:"title",value:l.title,onChange:t=>n("title",t.target.value),placeholder:"Enter banner title",className:a.title?"border-destructive":""}),a.title&&e.jsx("p",{className:"text-sm text-destructive",children:a.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(O,{id:"description",value:l.description,onChange:t=>n("description",t.target.value),placeholder:"Enter banner description",rows:4,className:a.description?"border-destructive":""}),a.description&&e.jsx("p",{className:"text-sm text-destructive",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"image",children:["Banner Image"," ",!i&&e.jsx("span",{className:"text-destructive",children:"*"})]}),o||m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative group rounded-lg overflow-hidden border",children:[e.jsx("img",{src:o?.url||o?.thumbnail_url||m,alt:"Preview",className:"w-full h-64 object-cover cursor-pointer transition-transform group-hover:scale-105",onClick:()=>{p(!0),u(1)}}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),e.jsx(r,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2",onClick:()=>{j(null),f(null),n("image_uid",null),n("image",null)},children:e.jsx(k,{className:"h-4 w-4"})})]}),o&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Selected from Media Library:"," ",o.filename]})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(r,{type:"button",variant:"outline",onClick:()=>x(!0),className:"w-full h-64 border-2 border-dashed hover:border-primary transition-colors",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(I,{className:"w-10 h-10 text-muted-foreground mb-4"}),e.jsx("span",{className:"text-sm font-medium text-foreground mb-1",children:"Select from Media Library"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Or upload a new image"})]})})}),a.image&&e.jsx("p",{className:"text-sm text-destructive",children:a.image}),a.image_uid&&e.jsx("p",{className:"text-sm text-destructive",children:a.image_uid}),i&&!o&&!m&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave empty to keep the current image"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"button_text",children:"Button Text"}),e.jsx(g,{id:"button_text",value:l.button_text,onChange:t=>n("button_text",t.target.value),placeholder:"e.g., Learn More",className:a.button_text?"border-destructive":""}),a.button_text&&e.jsx("p",{className:"text-sm text-destructive",children:a.button_text})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"button_link",children:"Button Link"}),e.jsx(g,{id:"button_link",value:l.button_link,onChange:t=>n("button_link",t.target.value),placeholder:"e.g., /products",className:a.button_link?"border-destructive":""}),a.button_link&&e.jsx("p",{className:"text-sm text-destructive",children:a.button_link})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{htmlFor:"is_active",className:"text-base",children:"Active Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.is_active?"Banner is visible on the website":"Banner is hidden from the website"})]}),e.jsx(C,{id:"is_active",checked:l.is_active,onCheckedChange:t=>n("is_active",t)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 mt-6",children:[e.jsx(r,{variant:"outline",asChild:!0,children:e.jsx(N,{href:"/admin/hero-banners",children:"Cancel"})}),e.jsx(r,{type:"submit",disabled:v,children:v?"Saving...":i?"Update Banner":"Create Banner"})]})]})]}),P&&(o||m)&&e.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:e.jsxs("div",{className:"relative max-w-7xl max-h-screen",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>p(!1),className:"absolute top-4 right-4 z-10 text-white hover:text-white hover:bg-white/20 rounded-full",children:e.jsx(k,{className:"h-6 w-6"})}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-2 bg-black/50 rounded-full px-4 py-2",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),u(Math.max(.5,h-.25))},className:"text-white hover:text-white hover:bg-white/20 h-8 w-8",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-white font-medium min-w-[4rem] text-center text-sm",children:[Math.round(h*100),"%"]}),e.jsx(r,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),u(Math.min(3,h+.25))},className:"text-white hover:text-white hover:bg-white/20 h-8 w-8",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),u(1)},className:"text-white hover:text-white hover:bg-white/20 h-8 px-3 text-sm",children:"Reset"})]}),e.jsx("div",{className:"overflow-auto max-h-[90vh]",onClick:t=>t.stopPropagation(),children:e.jsx("img",{src:o?.url||m,alt:"Preview",style:{transform:`scale(${h})`,transition:"transform 0.2s ease-in-out"},className:"max-w-full h-auto"})})]})}),e.jsx(Z,{open:M,onClose:()=>x(!1),onSelect:t=>{j(t),console.log("Selected media:",t),n("image_uid",t.uid),f(null),x(!1)},accept:"image",folder:"hero-banners"})]})}export{Y as default};
