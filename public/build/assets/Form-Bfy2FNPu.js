import{d as u,g as B,i as H,h as P,k as F,l as M,m as $,n as D,j as e,B as V,I as Y,U as q,H as K,o as G,p as W,q as X,s as Z,t as J,Y as Q,v as ee,R as te,E as se,a as ae,C as U,w as re,x as le,f as ie,L as I,A as ne,y as de}from"./vendor-BBx-STpB.js";import{A as oe}from"./AdminLayout-UKB9Xu_-.js";import{B as _}from"./Button-D_Ydtlzf.js";import{C as g,a as f,b,c as p}from"./Card-BhmBKBnU.js";import{F as N,b as E,a as T}from"./FormField-D9J2R80r.js";import{L}from"./Textarea-KwEVnhF1.js";import{A as ce}from"./Alert-Bvq7m6AA.js";import{B as ue}from"./Badge-BIe5ToDo.js";import"./Select-Csuxa9xw.js";function me({value:a,onChange:y,placeholder:w="Start writing your article..."}){const[o,s]=u.useState(!1),[i,v]=u.useState(!1),[m,l]=u.useState(!1),[n,k]=u.useState(""),[h,j]=u.useState(""),[C,S]=u.useState(""),t=B({extensions:[H.configure({heading:{levels:[2,3]}}),P,F.configure({HTMLAttributes:{class:"rounded-lg max-w-full h-auto my-4"}}),M.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline hover:text-blue-800"}}),$.configure({HTMLAttributes:{class:"rounded-lg my-4"},width:640,height:360}),D.configure({placeholder:w})],content:a||"",editorProps:{attributes:{class:"focus:outline-none min-h-[300px] p-4 text-gray-800"}},onUpdate:({editor:d})=>{y(d.getHTML())}});if(u.useEffect(()=>{t&&a!==t.getHTML()&&t.commands.setContent(a||"")},[a,t]),!t)return null;const r=()=>{n&&(t.chain().focus().setLink({href:n}).run(),k(""),s(!1))},x=()=>{h&&(t.chain().focus().setImage({src:h}).run(),j(""),v(!1))},A=()=>{C&&(t.commands.setYoutubeVideo({src:C}),S(""),l(!1))},c=({onClick:d,active:O,children:R,title:z})=>e.jsx("button",{type:"button",onClick:d,className:`p-2 rounded hover:bg-gray-200 transition ${O?"bg-gray-300 text-blue-600":"text-gray-700"}`,title:z,children:R});return e.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[e.jsx("style",{children:`
                .tiptap h2 {
                    font-size: 1.75rem;
                    font-weight: 700;
                    line-height: 2rem;
                    margin-top: 1.5rem;
                    margin-bottom: 1rem;
                    color: #1f2937;
                }
                .tiptap h3 {
                    font-size: 1.375rem;
                    font-weight: 700;
                    line-height: 1.75rem;
                    margin-top: 1.25rem;
                    margin-bottom: 0.75rem;
                    color: #374151;
                }
                .tiptap ul {
                    list-style-type: disc;
                    padding-left: 1.5rem;
                    margin-top: 1rem;
                    margin-bottom: 1rem;
                }
                .tiptap ol {
                    list-style-type: decimal;
                    padding-left: 1.5rem;
                    margin-top: 1rem;
                    margin-bottom: 1rem;
                }
                .tiptap li {
                    margin-top: 0.5rem;
                    margin-bottom: 0.5rem;
                    padding-left: 0.25rem;
                    line-height: 1.625;
                }
                .tiptap p {
                    margin-bottom: 1rem;
                    line-height: 1.75;
                }
                .tiptap strong {
                    font-weight: 700;
                    color: #111827;
                }
                .tiptap em {
                    font-style: italic;
                }
                .tiptap u {
                    text-decoration: underline;
                }
                .tiptap p.is-editor-empty:first-child::before {
                    color: #9ca3af;
                    content: attr(data-placeholder);
                    float: left;
                    height: 0;
                    pointer-events: none;
                }
            `}),e.jsxs("div",{className:"border-b border-gray-300 bg-gray-50 p-2 flex flex-wrap gap-1",children:[e.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[e.jsx(c,{onClick:()=>t.chain().focus().toggleBold().run(),active:t.isActive("bold"),title:"Bold (Ctrl+B)",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>t.chain().focus().toggleItalic().run(),active:t.isActive("italic"),title:"Italic (Ctrl+I)",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>t.chain().focus().toggleUnderline().run(),active:t.isActive("underline"),title:"Underline (Ctrl+U)",children:e.jsx(q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[e.jsx(c,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),active:t.isActive("heading",{level:2}),title:"Heading 2",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),active:t.isActive("heading",{level:3}),title:"Heading 3",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[e.jsx(c,{onClick:()=>t.chain().focus().toggleBulletList().run(),active:t.isActive("bulletList"),title:"Bullet List",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>t.chain().focus().toggleOrderedList().run(),active:t.isActive("orderedList"),title:"Numbered List",children:e.jsx(X,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[e.jsx(c,{onClick:()=>s(!o),active:t.isActive("link"),title:"Insert Link",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>v(!i),title:"Insert Image",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>l(!m),title:"Embed YouTube Video",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{onClick:()=>t.chain().focus().undo().run(),title:"Undo (Ctrl+Z)",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(c,{onClick:()=>t.chain().focus().redo().run(),title:"Redo (Ctrl+Y)",children:e.jsx(te,{className:"w-4 h-4"})})]})]}),o&&e.jsxs("div",{className:"border-b border-gray-300 bg-blue-50 p-3 flex gap-2",children:[e.jsx("input",{type:"url",placeholder:"Enter URL (e.g., https://example.com)",value:n,onChange:d=>k(d.target.value),onKeyPress:d=>d.key==="Enter"&&r(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx(_,{type:"button",onClick:r,size:"sm",children:"Add Link"}),e.jsx(_,{type:"button",onClick:()=>s(!1),variant:"secondary",size:"sm",children:"Cancel"})]}),i&&e.jsxs("div",{className:"border-b border-gray-300 bg-blue-50 p-3 flex gap-2",children:[e.jsx("input",{type:"url",placeholder:"Enter image URL",value:h,onChange:d=>j(d.target.value),onKeyPress:d=>d.key==="Enter"&&x(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx(_,{type:"button",onClick:x,size:"sm",children:"Add Image"}),e.jsx(_,{type:"button",onClick:()=>v(!1),variant:"secondary",size:"sm",children:"Cancel"})]}),m&&e.jsxs("div",{className:"border-b border-gray-300 bg-blue-50 p-3 flex gap-2",children:[e.jsx("input",{type:"url",placeholder:"Enter YouTube URL",value:C,onChange:d=>S(d.target.value),onKeyPress:d=>d.key==="Enter"&&A(),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),e.jsx(_,{type:"button",onClick:A,size:"sm",children:"Embed Video"}),e.jsx(_,{type:"button",onClick:()=>l(!1),variant:"secondary",size:"sm",children:"Cancel"})]}),e.jsx(se,{editor:t})]})}function he({title:a,subtitle:y,slug:w,content:o,metaTitle:s,metaDescription:i,metaKeywords:v,focusKeyword:m,tags:l}){const[n,k]=u.useState(null),[h,j]=u.useState(!1);u.useEffect(()=>{const r=setTimeout(()=>{m&&C()},1e3);return()=>clearTimeout(r)},[a,y,w,o,s,i,v,m,l]);const C=async()=>{j(!0);try{const r=await ae.post("/admin/articles/analyze-seo",{title:a,subtitle:y,slug:w,content:o,meta_title:s,meta_description:i,meta_keywords:v,focus_keyword:m,tags:l});k(r.data)}catch(r){console.error("SEO Analysis Error:",r)}finally{j(!1)}},S=r=>r>=80?"text-green-600 bg-green-50 border-green-200":r>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",t=r=>r>=80?"Excellent":r>=60?"Good":r>=40?"Fair":"Poor";return m?h&&!n?e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"SEO Analysis"})}),e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):n?e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(b,{children:"SEO Analysis"}),h&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-lg border-2 p-6 text-center ${S(n.score)}`,children:[e.jsxs("div",{className:"text-5xl font-bold mb-2",children:[n.score,"/100"]}),e.jsx("div",{className:"text-lg font-semibold",children:t(n.score)}),e.jsx("div",{className:"text-sm mt-1",children:"SEO Score"})]}),e.jsx("div",{className:"space-y-3",children:n.results.map((r,x)=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${r.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:"shrink-0 mt-0.5",children:r.passed?e.jsx(re,{className:"w-5 h-5 text-green-600"}):e.jsx(le,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.element}),e.jsxs(ue,{variant:"secondary",className:"text-xs",children:[r.weight," pts"]})]}),e.jsx("p",{className:`text-sm ${r.passed?"text-green-700":"text-red-700"}`,children:r.message})]})]},x))}),n.score<80&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"ðŸ’¡ Tips untuk meningkatkan SEO Score:"}),e.jsx("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:n.results.filter(r=>!r.passed).slice(0,3).map((r,x)=>e.jsx("li",{children:r.message},x))})]})]})]}):null:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-600"}),"SEO Analysis"]})}),e.jsx(p,{children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Masukkan ",e.jsx("strong",{children:"Focus Keyword"})," untuk mendapatkan analisis SEO secara real-time."]})})]})}function _e({article:a,categories:y,users:w}){const o=a!==null,{data:s,setData:i,post:v,processing:m,errors:l}=ie({title:a?.title||"",subtitle:a?.subtitle||"",article_category_uid:a?.article_category_uid||(y.length>0?y[0].uid:""),slug:a?.slug||"",excerpt:a?.excerpt||"",content:a?.content||"",featured_image:null,video_url:a?.video_url||"",tags:a?.tags||"",author_uid:a?.author_uid||"",editor_uid:a?.editor_uid||"",meta_title:a?.meta_title||"",meta_description:a?.meta_description||"",meta_keywords:a?.meta_keywords||"",focus_keywords:a?.focus_keywords||"",status:a?.status||"draft",scheduled_at:a?.scheduled_at?a.scheduled_at.split("T")[0]+"T"+a.scheduled_at.split("T")[1].substring(0,5):"",_method:o?"PUT":"POST"}),[n,k]=u.useState(a?.featured_image?a.featured_image.startsWith("http")?a.featured_image:`/storage/${a.featured_image}`:null);u.useEffect(()=>{if(!o&&s.title&&!s.slug){const t=s.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");i("slug",t)}},[s.title]);const h=s.title.length,j=s.meta_description.length,C=t=>{const r=t.target.files[0];if(r){i("featured_image",r);const x=new FileReader;x.onloadend=()=>{k(x.result)},x.readAsDataURL(r)}},S=t=>{t.preventDefault();const r=o?`/admin/articles/${a.uid}`:"/admin/articles";v(r)};return e.jsxs(oe,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(I,{href:"/admin/articles",className:"text-gray-600 hover:text-gray-900",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"Edit Article":"Create New Article"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:o?"Update article information":"Create a new article with SEO optimization"})]}),e.jsx("form",{onSubmit:S,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"Article Information"})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(N,{label:"Article Title",name:"title",required:!0,value:s.title,onChange:t=>i("title",t.target.value),error:l.title,placeholder:"Enter article title"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs",children:[e.jsxs("span",{className:h>=55&&h<=60?"text-green-600":"text-gray-500",children:[h," characters"]}),e.jsx("span",{className:"text-gray-500",children:"Recommended: 55-60 characters"})]})]}),e.jsx(N,{label:"Subtitle",name:"subtitle",value:s.subtitle,onChange:t=>i("subtitle",t.target.value),error:l.subtitle,placeholder:"Enter subtitle (optional)"}),e.jsx(E,{label:"Category",name:"article_category_uid",required:!0,value:s.article_category_uid,onChange:t=>i("article_category_uid",t.target.value),error:l.article_category_uid,children:y.map(t=>e.jsx("option",{value:t.uid,children:t.name},t.uid))}),e.jsx(T,{label:"Excerpt",name:"excerpt",value:s.excerpt,onChange:t=>i("excerpt",t.target.value),error:l.excerpt,placeholder:"Brief summary of the article",rows:3})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"Article Content"})}),e.jsxs(p,{children:[e.jsx(L,{required:!0,children:"Content"}),e.jsx("div",{className:"mt-2",children:e.jsx(me,{value:s.content,onChange:t=>i("content",t),placeholder:"Start writing your article..."})}),l.content&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:l.content})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"Media"})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(L,{children:"Featured Image"}),e.jsxs("div",{className:"mt-2",children:[n&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:n,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"})}),e.jsx("input",{type:"file",id:"featured_image",accept:"image/*",onChange:C,className:"hidden"}),e.jsxs("label",{htmlFor:"featured_image",className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg cursor-pointer transition-colors font-medium text-sm",children:[e.jsx(de,{className:"w-4 h-4"}),n?"Change Image":"Upload Image"]}),l.featured_image&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:l.featured_image})]})]}),e.jsx(N,{label:"Video URL",name:"video_url",type:"url",value:s.video_url,onChange:t=>i("video_url",t.target.value),error:l.video_url,placeholder:"https://youtube.com/watch?v=...",helperText:"YouTube or video URL"})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"Additional Information"})}),e.jsxs(p,{className:"space-y-6",children:[e.jsx(N,{label:"Tags",name:"tags",value:s.tags,onChange:t=>i("tags",t.target.value),error:l.tags,placeholder:"tag1, tag2, tag3",helperText:"Separate tags with commas"}),e.jsxs(E,{label:"Author",name:"author_uid",value:s.author_uid,onChange:t=>i("author_uid",t.target.value),error:l.author_uid,children:[e.jsx("option",{value:"",children:"Select Author (Optional)"}),w.map(t=>e.jsx("option",{value:t.uid,children:t.full_name},t.uid))]}),e.jsxs(E,{label:"Editor",name:"editor_uid",value:s.editor_uid,onChange:t=>i("editor_uid",t.target.value),error:l.editor_uid,children:[e.jsx("option",{value:"",children:"Select Editor (Optional)"}),w.map(t=>e.jsx("option",{value:t.uid,children:t.full_name},t.uid))]})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"SEO Configuration"})}),e.jsxs(p,{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(N,{label:"URL Slug",name:"slug",value:s.slug,onChange:t=>i("slug",t.target.value),error:l.slug,placeholder:"article-url-slug",helperText:"Auto-generated from title, but you can customize it"})}),e.jsx(N,{label:"SEO Meta Title",name:"meta_title",value:s.meta_title,onChange:t=>i("meta_title",t.target.value),error:l.meta_title,placeholder:"Custom title for search engines"}),e.jsxs("div",{children:[e.jsx(T,{label:"SEO Meta Description",name:"meta_description",value:s.meta_description,onChange:t=>i("meta_description",t.target.value),error:l.meta_description,placeholder:"Description for search engines",rows:3}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs",children:[e.jsxs("span",{className:j>=110&&j<=155?"text-green-600":"text-gray-500",children:[j," characters"]}),e.jsx("span",{className:"text-gray-500",children:"Recommended: 110-155 characters"})]})]}),e.jsx(N,{label:"SEO Meta Keywords",name:"meta_keywords",value:s.meta_keywords,onChange:t=>i("meta_keywords",t.target.value),error:l.meta_keywords,placeholder:"keyword1, keyword2, keyword3"}),e.jsx(N,{label:"Focus Keyword",name:"focus_keywords",value:s.focus_keywords,onChange:t=>i("focus_keywords",t.target.value),error:l.focus_keywords,placeholder:"Main keyword for SEO analysis",helperText:"Primary keyword you want to rank for"})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(b,{children:"Publishing Options"})}),e.jsxs(p,{className:"space-y-6",children:[e.jsxs(E,{label:"Status",name:"status",required:!0,value:s.status,onChange:t=>i("status",t.target.value),error:l.status,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Publish Now"}),e.jsx("option",{value:"scheduled",children:"Schedule"})]}),s.status==="scheduled"&&e.jsxs("div",{children:[e.jsx(L,{required:!0,children:"Scheduled Date & Time"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"datetime-local",value:s.scheduled_at,onChange:t=>i("scheduled_at",t.target.value),className:"flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm"})}),l.scheduled_at&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:l.scheduled_at})]}),s.status==="published"&&e.jsxs(ce,{variant:"default",className:"bg-green-50 border-green-200",children:[e.jsx(U,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-sm text-green-800",children:"This article will be published immediately upon saving."})]})]})]}),e.jsx(g,{children:e.jsxs(p,{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(I,{href:"/admin/articles",children:e.jsx(_,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(_,{type:"submit",disabled:m,children:m?"Saving...":o?"Update Article":"Create Article"})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-6",children:e.jsx(he,{title:s.title,subtitle:s.subtitle,slug:s.slug,content:s.content,metaTitle:s.meta_title,metaDescription:s.meta_description,metaKeywords:s.meta_keywords,focusKeyword:s.focus_keywords,tags:s.tags})})})]})})]})}export{_e as default};
