import{j as e,R as w,u as C,d as j,S as b,L as D,n as S,T,M as F,e as d}from"./vendor-BnbgrNvg.js";import{A}from"./AdminLayout-sVT0_NAf.js";import{B as i}from"./Button-C9qRTbX8.js";import{C as p}from"./Card-Dup5Ukx4.js";import{A as I}from"./Alert-eEaMtgZF.js";import{B as L}from"./Badge-C1TDCZWx.js";import{I as R}from"./Input-BiTaUmO9.js";import{P as _}from"./Pagination-CjnCdGXL.js";import{T as k,a as B,b as g,c as a,d as q,e as t}from"./Table-G1IrKxy8.js";import{D as M,a as P,b as E,c as H,d as z,e as U}from"./Dialog-DwNRdUFJ.js";function $({...r}){return e.jsx(w,{"data-slot":"select",...r})}function ee({contacts:r,filters:c}){const{flash:o}=C().props,[m,l]=j.useState(null),[n,h]=j.useState({status:c.status||"",search:c.search||""}),v=s=>{d.delete(`/admin/contacts/${s}`,{onSuccess:()=>l(null)})},x=(s,y)=>{const u={...n,[s]:y};h(u),d.get("/admin/contacts",u,{preserveState:!0,preserveScroll:!0})},N=()=>{h({status:"",search:""}),d.get("/admin/contacts",{},{preserveState:!0,preserveScroll:!0})},f=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(A,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Contact Leads"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer inquiries and contact requests"})]}),o.success&&e.jsx(I,{variant:"success",className:"mb-6",children:o.success}),e.jsx(p,{className:"p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(R,{type:"text",placeholder:"Search by name, email, or phone...",value:n.search,onChange:s=>x("search",s.target.value),className:"pl-9"})]}),e.jsx("div",{children:e.jsxs($,{value:n.status,onChange:s=>x("status",s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"unread",children:"Unread"}),e.jsx("option",{value:"read",children:"Read"})]})}),e.jsx("div",{children:e.jsx(i,{onClick:N,variant:"secondary",className:"w-full",children:"Clear Filters"})})]})}),e.jsx(p,{className:"overflow-hidden",children:r.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs(g,{children:[e.jsx(a,{children:"Contact Info"}),e.jsx(a,{children:"Product"}),e.jsx(a,{children:"Message"}),e.jsx(a,{children:"Date"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(q,{children:r.data.map(s=>e.jsxs(g,{className:s.is_read?"":"bg-blue-50/50",children:[e.jsx(t,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center",children:[s.name,!s.is_read&&e.jsx("span",{className:"ml-2 w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),s.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:s.phone})]})}),e.jsx(t,{className:"whitespace-nowrap",children:s.product?e.jsx("div",{className:"text-sm text-gray-900",children:s.product.name}):e.jsx("span",{className:"text-sm text-gray-400",children:"General Inquiry"})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm text-gray-900 line-clamp-2 max-w-md",children:s.message})}),e.jsx(t,{className:"whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:f(s.created_at)})}),e.jsx(t,{className:"whitespace-nowrap",children:e.jsx(L,{variant:s.is_read?"secondary":"default",children:s.is_read?"Read":"Unread"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(D,{href:`/admin/contacts/${s.uid}`,children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"View"]})}),e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>l(s.uid),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},s.uid))})]}),e.jsx(_,{data:r})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contact leads"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Contact requests will appear here"})]})}),e.jsx(M,{open:!!m,onOpenChange:()=>l(null),children:e.jsxs(P,{onClose:()=>l(null),children:[e.jsxs(E,{children:[e.jsx(H,{children:"Delete Contact"}),e.jsx(z,{children:"Are you sure you want to delete this contact? This action cannot be undone."})]}),e.jsxs(U,{children:[e.jsx(i,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:()=>v(m),children:"Delete"})]})]})})]})}export{ee as default};
