import{f as _,d as p,j as e,L as h}from"./vendor-BBx-STpB.js";import{A as C}from"./AdminLayout-UKB9Xu_-.js";import"./Button-D_Ydtlzf.js";function I({product:a}){const i=a!==null,{data:s,setData:t,post:b,processing:x,errors:l}=_({name:a?.name||"",type:a?.type||"house",description:a?.description||"",price:a?.price||"",land_area:a?.land_area||"",building_area:a?.building_area||"",bedrooms:a?.bedrooms||"",bathrooms:a?.bathrooms||"",floors:a?.floors||"",garage:a?.garage||"",location:a?.location||"",city:a?.city||"",province:a?.province||"",latitude:a?.latitude||"",longitude:a?.longitude||"",video_url:a?.video_url||"",video_360_url:a?.video_360_url||"",is_featured:a?.is_featured??!1,is_sold:a?.is_sold??!1,is_active:a?.is_active??!0,images:[],deleted_images:[],_method:i?"PUT":"POST"}),[c,f]=p.useState(a?.images||[]),[n,g]=p.useState([]),j=r=>{const o=Array.from(r.target.files);if(o.length>0){t("images",[...s.images,...o]);const d=o.map(m=>new Promise(k=>{const u=new FileReader;u.onloadend=()=>k(u.result),u.readAsDataURL(m)}));Promise.all(d).then(m=>{g([...n,...m])})}},y=r=>{const o=[...s.images];o.splice(r,1),t("images",o);const d=[...n];d.splice(r,1),g(d)},v=r=>{f(c.filter(o=>o.id!==r)),t("deleted_images",[...s.deleted_images,r])},N=r=>{r.preventDefault();const o=i?`/admin/products/${a.uid}`:"/admin/products";b(o)},w=r=>r?new Intl.NumberFormat("id-ID").format(r):"";return e.jsxs(C,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(h,{href:"/admin/products",className:"text-gray-600 hover:text-gray-900",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i?"Edit Product":"Create New Product"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:i?"Update the product details below":"Fill in the form to add a new product"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",type:"text",value:s.name,onChange:r=>t("name",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.name?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter property name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"type",value:s.type,onChange:r=>t("type",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.type?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"land",children:"Land"})]}),l.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.type})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price (IDR) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"price",type:"number",value:s.price,onChange:r=>t("price",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.price?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"0"}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.price}),s.price&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[w(s.price)," IDR"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",value:s.description,onChange:r=>t("description",r.target.value),rows:6,className:`w-full px-4 py-2 rounded-lg border ${l.description?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter property description"}),l.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"land_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Land Area (m²)"}),e.jsx("input",{id:"land_area",type:"number",step:"0.01",value:s.land_area,onChange:r=>t("land_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Building Area (m²)"}),e.jsx("input",{id:"building_area",type:"number",step:"0.01",value:s.building_area,onChange:r=>t("building_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),e.jsx("input",{id:"bedrooms",type:"number",value:s.bedrooms,onChange:r=>t("bedrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms"}),e.jsx("input",{id:"bathrooms",type:"number",value:s.bathrooms,onChange:r=>t("bathrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"floors",className:"block text-sm font-medium text-gray-700 mb-2",children:"Floors"}),e.jsx("input",{id:"floors",type:"number",value:s.floors,onChange:r=>t("floors",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"garage",className:"block text-sm font-medium text-gray-700 mb-2",children:"Garage"}),e.jsx("input",{id:"garage",type:"number",value:s.garage,onChange:r=>t("garage",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"location",type:"text",value:s.location,onChange:r=>t("location",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.location?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter full address"}),l.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.location})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"city",type:"text",value:s.city,onChange:r=>t("city",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.city?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter city"}),l.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-2",children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"province",type:"text",value:s.province,onChange:r=>t("province",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.province?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter province"}),l.province&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.province})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),e.jsx("input",{id:"latitude",type:"number",step:"any",value:s.latitude,onChange:r=>t("latitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-6.200000"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),e.jsx("input",{id:"longitude",type:"number",step:"any",value:s.longitude,onChange:r=>t("longitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"106.816666"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Images"}),i&&c.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Current Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map(r=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.image_path.startsWith("http")?r.image_path:`/storage/${r.image_path}`,alt:"Product",className:"w-full h-32 object-cover rounded-lg"}),r.is_primary&&e.jsx("span",{className:"absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded",children:"Primary"}),e.jsx("button",{type:"button",onClick:()=>v(r.id),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r.id))})]}),n.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:n.map((r,o)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:`Preview ${o+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>y(o),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},o))})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"images",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, JPEG or WEBP (MAX. 2MB each)"})]}),e.jsx("input",{id:"images",type:"file",className:"hidden",accept:"image/jpeg,image/png,image/jpg,image/webp",multiple:!0,onChange:j})]})}),l.images&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.images})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Media Links (Optional)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),e.jsx("input",{id:"video_url",type:"url",value:s.video_url,onChange:r=>t("video_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://youtube.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_360_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"360° Video URL"}),e.jsx("input",{id:"video_360_url",type:"url",value:s.video_360_url,onChange:r=>t("video_360_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.is_featured,onChange:r=>t("is_featured",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Featured Product"})]})}),i&&e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.is_sold,onChange:r=>t("is_sold",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Mark as Sold"})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.is_active,onChange:r=>t("is_active",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Active"})]})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(h,{href:"/admin/products",className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Saving...":i?"Update Product":"Create Product"})]})})]})]})}export{I as default};
