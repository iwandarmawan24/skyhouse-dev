import{u as S,d as g,j as e,L as o,P as p,S as T,z as _,T as F,D as P,e as h}from"./vendor-ERzRPhBn.js";import{A as k}from"./AdminLayout-BzYBBHe-.js";import{B as a}from"./Button-DKkj-eXv.js";import{I as B}from"./Input-6qSCy0Tm.js";import{S as v}from"./Select-PcpVC9Lh.js";import{A as L}from"./Alert-C64N3IzW.js";import{B as f}from"./Badge-B7vNS-mb.js";import{C as N}from"./Card-BAS-lTRp.js";import{P as z}from"./Pagination-BoFrHyhw.js";import{T as I,a as E,b as y,c as t,d as H,e as r}from"./Table-BJHOxjky.js";import{D as $,a as R,b as G,c as M,d as O,e as W}from"./Dialog-BX14YzQf.js";function ae({articles:n,categories:b,filters:c}){const{flash:x}=S().props,[m,l]=g.useState(null),[i,u]=g.useState({category:c.category||"",status:c.status||"",search:c.search||""}),C=s=>{h.delete(`/admin/articles/${s}`,{onSuccess:()=>l(null)})},d=(s,A)=>{const j={...i,[s]:A};u(j),h.get("/admin/articles",j,{preserveState:!0,preserveScroll:!0})},D=()=>{u({category:"",status:"",search:""}),h.get("/admin/articles",{},{preserveState:!0,preserveScroll:!0})},w=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(k,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Articles"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage blog articles and content"})]}),e.jsx(a,{asChild:!0,children:e.jsxs(o,{href:"/admin/articles/create",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Add New Article"]})})]}),x.success&&e.jsx(L,{variant:"success",className:"mb-6",children:x.success}),e.jsxs(N,{className:"p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(B,{type:"text",placeholder:"Search by title or excerpt...",value:i.search,onChange:s=>d("search",s.target.value),className:"pl-9"})]}),e.jsx("div",{children:e.jsxs(v,{value:i.category,onChange:s=>d("category",s.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{children:e.jsxs(v,{value:i.status,onChange:s=>d("status",s.target.value),children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Draft"})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(a,{variant:"secondary",size:"sm",onClick:D,children:"Clear Filters"})})]}),e.jsx(N,{className:"overflow-hidden",children:n.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx(E,{children:e.jsxs(y,{children:[e.jsx(t,{children:"Article"}),e.jsx(t,{children:"Category"}),e.jsx(t,{children:"Author"}),e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(H,{children:n.data.map(s=>e.jsxs(y,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center",children:[s.featured_image&&e.jsx("div",{className:"flex-shrink-0 h-16 w-24 mr-4",children:e.jsx("img",{src:s.featured_image.startsWith("http")?s.featured_image:`/storage/${s.featured_image}`,alt:s.title,className:"h-16 w-24 object-cover rounded-lg"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),s.excerpt&&e.jsx("div",{className:"text-sm text-gray-500 line-clamp-1",children:s.excerpt})]})]})}),e.jsx(r,{children:e.jsx(f,{variant:"default",children:s.category.name})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.author?.full_name||s.user?.full_name||"-"})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.published_at?w(s.published_at):"-"})}),e.jsx(r,{children:e.jsx(f,{variant:s.is_published?"success":"secondary",children:s.is_published?"Published":"Draft"})}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(o,{href:`/admin/articles/${s.uid}/edit`,children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Edit"]})}),e.jsxs(a,{variant:"ghost",size:"sm",onClick:()=>l(s.uid),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]},s.uid))})]}),e.jsx(z,{data:n})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No articles"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new article."}),e.jsx("div",{className:"mt-6",children:e.jsx(a,{asChild:!0,children:e.jsxs(o,{href:"/admin/articles/create",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Add New Article"]})})})]})}),e.jsx($,{open:!!m,onOpenChange:s=>!s&&l(null),children:e.jsxs(R,{onClose:()=>l(null),children:[e.jsxs(G,{children:[e.jsx(M,{children:"Delete Article"}),e.jsx(O,{children:"Are you sure you want to delete this article? This action cannot be undone."})]}),e.jsxs(W,{children:[e.jsx(a,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:()=>C(m),children:"Delete"})]})]})})]})}export{ae as default};
