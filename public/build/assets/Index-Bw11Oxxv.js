import{u as C,d as p,j as e,L as c,P as v,S,O as T,e as d}from"./vendor-CGGQDrpY.js";import{A}from"./AdminLayout-Q6Po-ppz.js";import{B as a}from"./Button-DtLeDkBC.js";import{I as E}from"./Input-vqcA0MAI.js";import{A as F}from"./Alert-D7r6Jku0.js";import{B as f}from"./Badge-Cq8sI8zv.js";import{P}from"./Pagination-CmKTazYe.js";import{T as k,a as L,b as N,c as t,d as B,e as r}from"./Table-DAe2bP2c.js";import{D as _,a as I,b as H,c as U,d as $,e as z}from"./Dialog-Be0ftsTY.js";function V({events:l,filters:o}){const{flash:h}=C().props,[x,i]=p.useState(null),[n,m]=p.useState({status:o.status||"",search:o.search||""}),y=s=>{d.delete(`/admin/events/${s}`,{onSuccess:()=>i(null)})},j=(s,D)=>{const g={...n,[s]:D};m(g),d.get("/admin/events",g,{preserveState:!0,preserveScroll:!0})},b=()=>{m({status:"",search:""}),d.get("/admin/events",{},{preserveState:!0,preserveScroll:!0})},w=s=>new Date(s).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=s=>new Date(s)>new Date;return e.jsxs(A,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage property events and open houses"})]}),e.jsx(c,{href:"/admin/events/create",children:e.jsxs(a,{children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Add New Event"]})})]}),h.success&&e.jsx("div",{className:"mb-6",children:e.jsx(F,{variant:"success",children:h.success})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(E,{type:"text",placeholder:"Search by title or location...",value:n.search,onChange:s=>j("search",s.target.value),className:"pl-10"})]}),e.jsx("div",{children:e.jsxs("select",{value:n.status,onChange:s=>j("status",s.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Events"}),e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"past",children:"Past"})]})}),e.jsx("div",{children:e.jsx(a,{onClick:b,variant:"secondary",className:"w-full",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:l.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(L,{children:e.jsxs(N,{children:[e.jsx(t,{children:"Event"}),e.jsx(t,{children:"Date & Time"}),e.jsx(t,{children:"Location"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(B,{children:l.data.map(s=>e.jsxs(N,{children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-16 w-24",children:e.jsx("img",{src:s.image.startsWith("http")?s.image:`/storage/${s.image}`,alt:s.title,className:"h-16 w-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.title}),s.description&&e.jsxs("div",{className:"text-sm text-gray-500 line-clamp-1",children:[s.description.substring(0,50),"..."]})]})]})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm text-gray-900",children:w(s.event_date)})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm text-gray-900",children:s.location})}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(f,{variant:u(s.event_date)?"success":"secondary",children:u(s.event_date)?"Upcoming":"Past"}),s.is_active&&e.jsx(f,{variant:"default",children:"Active"})]})}),e.jsx(r,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(c,{href:`/admin/events/${s.uid}/edit`,children:e.jsx(a,{variant:"ghost",size:"sm",children:"Edit"})}),e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>i(s.uid),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Delete"})]})})]},s.uid))})]}),e.jsx(P,{data:l})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(T,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No events"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new event."}),e.jsx("div",{className:"mt-6",children:e.jsx(c,{href:"/admin/events/create",children:e.jsxs(a,{children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Add New Event"]})})})]})}),e.jsx(_,{open:!!x,onOpenChange:()=>i(null),children:e.jsxs(I,{children:[e.jsxs(H,{children:[e.jsx(U,{children:"Delete Event"}),e.jsx($,{children:"Are you sure you want to delete this event? This action cannot be undone."})]}),e.jsxs(z,{children:[e.jsx(a,{variant:"secondary",onClick:()=>i(null),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:()=>y(x),children:"Delete"})]})]})})]})}export{V as default};
