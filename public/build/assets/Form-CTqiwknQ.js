import{f as w,d as u,j as e,L as x,A as C,I as S,U as _}from"./vendor-BnbgrNvg.js";import{A as L}from"./AdminLayout-sVT0_NAf.js";import{B as p}from"./Button-C9qRTbX8.js";import{C as h,a as M,b as P,c as j}from"./Card-Dup5Ukx4.js";import{F as k,b as A}from"./FormField-DjPAj18X.js";import{L as F}from"./Label-D-CdDNeh.js";import{M as U}from"./MediaPicker-Bs1F3hOt.js";import"./Input-BiTaUmO9.js";import"./Textarea-CzbTjwCv.js";import"./Dialog-DwNRdUFJ.js";function H({media:a}){const s=a!==null;console.log("Media prop:",a),console.log("Media logo:",a?.logo),console.log("Media logo_uid:",a?.logo_uid);const{data:m,setData:o,post:f,processing:g,errors:r}=w({name:a?.name||"",logo:null,logo_uid:a?.logo_uid||null,is_active:a?.is_active??!0,_method:s?"PUT":"POST"}),[i,n]=u.useState(a?.logo?a.logo.startsWith("http")?a.logo:`/storage/${a.logo}`:null),[b,c]=u.useState(!1);console.log("Initial logoPreview:",i);const v=t=>{const l=t.target.files[0];if(l){o("logo",l);const d=new FileReader;d.onloadend=()=>{n(d.result)},d.readAsDataURL(l)}},y=t=>{t&&(console.log("Selected media:",t),console.log("Media URL:",t.url),n(t.url),o("logo_uid",t.uid),o("logo",null)),c(!1)},N=t=>{t.preventDefault();const l=s?`/admin/media/${a.uid}`:"/admin/media";f(l)};return e.jsxs(L,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(x,{href:"/admin/media",className:"text-gray-600 hover:text-gray-900",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"Edit Media Outlet":"Add New Media Outlet"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:s?"Update media outlet information":"Add a new media outlet"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6 max-w-2xl",children:[e.jsxs(h,{children:[e.jsx(M,{children:e.jsx(P,{children:"Media Information"})}),e.jsxs(j,{className:"space-y-6",children:[e.jsx(k,{label:"Media Name",name:"name",required:!0,value:m.name,onChange:t=>o("name",t.target.value),error:r.name,placeholder:"e.g., The New York Times, CNN, BBC"}),e.jsxs("div",{children:[e.jsx(F,{required:!0,children:"Logo Image"}),e.jsxs("div",{className:"mt-2",children:[i&&e.jsxs("div",{className:"mb-4 relative group flex items-center justify-center",children:[e.jsx("img",{src:i,alt:"Logo Preview",className:"h-24 w-auto object-contain border border-gray-200 rounded-lg bg-gray-50 p-2"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-lg flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>{n(null),o("logo",null),o("logo_uid",null)},className:"opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg",children:"Remove"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>c(!0),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium text-sm",children:[e.jsx(S,{className:"w-4 h-4"}),"Media Library"]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"logo",accept:"image/*",onChange:v,className:"hidden"}),e.jsxs("label",{htmlFor:"logo",className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg cursor-pointer transition-colors font-medium text-sm",children:[e.jsx(_,{className:"w-4 h-4"}),"Upload File"]})]})]}),r.logo&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:r.logo}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: Square image (PNG, JPG, SVG), max 2MB"})]})]}),e.jsxs(A,{label:"Status",name:"is_active",required:!0,value:m.is_active?"1":"0",onChange:t=>o("is_active",t.target.value==="1"),error:r.is_active,children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Inactive"})]})]})]}),e.jsx(h,{children:e.jsxs(j,{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(x,{href:"/admin/media",children:e.jsx(p,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(p,{type:"submit",disabled:g,children:g?"Saving...":s?"Update Media":"Create Media"})]})})]}),e.jsx(U,{open:b,onClose:()=>c(!1),onSelect:y,multiple:!1,accept:"image",folder:"media-logos"})]})}export{H as default};
