import{d as j,a as P,j as e,C as F,g as R,h as M,f as U,L as A,A as D,I,U as z}from"./vendor-BnbgrNvg.js";import{A as $}from"./AdminLayout-sVT0_NAf.js";import{B as T}from"./Button-C9qRTbX8.js";import{C as d,a as u,b as m,c as o}from"./Card-Dup5Ukx4.js";import{F as x,b as k,a as O}from"./FormField-DjPAj18X.js";import{L}from"./Label-D-CdDNeh.js";import{A as B}from"./Alert-eEaMtgZF.js";import{R as q}from"./RichTextEditor-C15quRD8.js";import{B as G}from"./Badge-C1TDCZWx.js";import{M as H}from"./MediaPicker-Bs1F3hOt.js";import"./Input-BiTaUmO9.js";import"./Textarea-CzbTjwCv.js";import"./Dialog-DwNRdUFJ.js";function K({title:a,subtitle:g,slug:f,content:c,metaTitle:s,metaDescription:r,metaKeywords:w,focusKeyword:h,tags:i}){const[n,b]=j.useState(null),[C,p]=j.useState(!1);j.useEffect(()=>{const l=setTimeout(()=>{h&&y()},1e3);return()=>clearTimeout(l)},[a,g,f,c,s,r,w,h,i]);const y=async()=>{p(!0);try{const l=await P.post("/admin/articles/analyze-seo",{title:a,subtitle:g,slug:f,content:c,meta_title:s,meta_description:r,meta_keywords:w,focus_keyword:h,tags:i});b(l.data)}catch(l){console.error("SEO Analysis Error:",l)}finally{p(!1)}},v=l=>l>=80?"text-green-600 bg-green-50 border-green-200":l>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",S=l=>l>=80?"Excellent":l>=60?"Good":l>=40?"Fair":"Poor";return h?C&&!n?e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"SEO Analysis"})}),e.jsx(o,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):n?e.jsxs(d,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{children:"SEO Analysis"}),C&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-lg border-2 p-6 text-center ${v(n.score)}`,children:[e.jsxs("div",{className:"text-5xl font-bold mb-2",children:[n.score,"/100"]}),e.jsx("div",{className:"text-lg font-semibold",children:S(n.score)}),e.jsx("div",{className:"text-sm mt-1",children:"SEO Score"})]}),e.jsx("div",{className:"space-y-3",children:n.results.map((l,_)=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border ${l.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("div",{className:"shrink-0 mt-0.5",children:l.passed?e.jsx(R,{className:"w-5 h-5 text-green-600"}):e.jsx(M,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:l.element}),e.jsxs(G,{variant:"secondary",className:"text-xs",children:[l.weight," pts"]})]}),e.jsx("p",{className:`text-sm ${l.passed?"text-green-700":"text-red-700"}`,children:l.message})]})]},_))}),n.score<80&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"ðŸ’¡ Tips untuk meningkatkan SEO Score:"}),e.jsx("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:n.results.filter(l=>!l.passed).slice(0,3).map((l,_)=>e.jsx("li",{children:l.message},_))})]})]})]}):null:e.jsxs(d,{children:[e.jsx(u,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-600"}),"SEO Analysis"]})}),e.jsx(o,{children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Masukkan ",e.jsx("strong",{children:"Focus Keyword"})," untuk mendapatkan analisis SEO secara real-time."]})})]})}function ie({article:a,categories:g,users:f}){const c=a!==null,{data:s,setData:r,post:w,processing:h,errors:i}=U({title:a?.title||"",subtitle:a?.subtitle||"",article_category_uid:a?.article_category_uid||(g.length>0?g[0].uid:""),slug:a?.slug||"",excerpt:a?.excerpt||"",content:a?.content||"",featured_image:null,featured_image_uid:a?.featured_image_uid||null,video_url:a?.video_url||"",tags:a?.tags||"",author_uid:a?.author_uid||"",editor_uid:a?.editor_uid||"",meta_title:a?.meta_title||"",meta_description:a?.meta_description||"",meta_keywords:a?.meta_keywords||"",focus_keywords:a?.focus_keywords||"",status:a?.computed_status||a?.status||"draft",scheduled_at:a?.scheduled_at?a.scheduled_at.split("T")[0]+"T"+a.scheduled_at.split("T")[1].substring(0,5):"",_method:c?"PUT":"POST"}),[n,b]=j.useState(a?.featured_image?a.featured_image.startsWith("http")?a.featured_image:`/storage/${a.featured_image}`:null),[C,p]=j.useState(!1);j.useEffect(()=>{if(!c&&s.title&&!s.slug){const t=s.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");r("slug",t)}},[s.title]);const y=s.title.length,v=s.meta_description.length,S=t=>{const N=t.target.files[0];if(N){r("featured_image",N);const E=new FileReader;E.onloadend=()=>{b(E.result)},E.readAsDataURL(N)}},l=t=>{t&&(b(t.url),r("featured_image_uid",t.uid),r("featured_image",null)),p(!1)},_=t=>{t.preventDefault();const N=c?`/admin/articles/${a.uid}`:"/admin/articles";w(N)};return e.jsxs($,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(A,{href:"/admin/articles",className:"text-gray-600 hover:text-gray-900",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c?"Edit Article":"Create New Article"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:c?"Update article information":"Create a new article with SEO optimization"})]}),e.jsx("form",{onSubmit:_,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"Article Information"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(x,{label:"Article Title",name:"title",required:!0,value:s.title,onChange:t=>r("title",t.target.value),error:i.title,placeholder:"Enter article title"}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs",children:[e.jsxs("span",{className:y>=55&&y<=60?"text-green-600":"text-gray-500",children:[y," characters"]}),e.jsx("span",{className:"text-gray-500",children:"Recommended: 55-60 characters"})]})]}),e.jsx(x,{label:"Subtitle",name:"subtitle",value:s.subtitle,onChange:t=>r("subtitle",t.target.value),error:i.subtitle,placeholder:"Enter subtitle (optional)"}),e.jsx(k,{label:"Category",name:"article_category_uid",required:!0,value:s.article_category_uid,onChange:t=>r("article_category_uid",t.target.value),error:i.article_category_uid,children:g.map(t=>e.jsx("option",{value:t.uid,children:t.name},t.uid))}),e.jsx(O,{label:"Excerpt",name:"excerpt",value:s.excerpt,onChange:t=>r("excerpt",t.target.value),error:i.excerpt,placeholder:"Brief summary of the article",rows:3})]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"Article Content"})}),e.jsx(o,{children:e.jsx("div",{className:"mt-2",children:e.jsx(q,{value:s.content,onChange:t=>r("content",t),placeholder:"Start writing your article...",error:i.content})})})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"Medias"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(L,{children:"Featured Image"}),e.jsxs("div",{className:"mt-2",children:[n&&e.jsxs("div",{className:"mb-4 relative group",children:[e.jsx("img",{src:n,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all rounded-lg flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>{b(null),r("featured_image",null),r("featured_image_uid",null)},className:"opacity-0 group-hover:opacity-100 transition-opacity px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg",children:"Remove"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>p(!0),className:"inline-flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium text-sm",children:[e.jsx(I,{className:"w-4 h-4"}),"Media Library"]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",id:"featured_image",accept:"image/*",onChange:S,className:"hidden"}),e.jsxs("label",{htmlFor:"featured_image",className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg cursor-pointer transition-colors font-medium text-sm",children:[e.jsx(z,{className:"w-4 h-4"}),"Upload File"]})]})]}),i.featured_image&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:i.featured_image})]})]}),e.jsx(x,{label:"Video URL",name:"video_url",type:"url",value:s.video_url,onChange:t=>r("video_url",t.target.value),error:i.video_url,placeholder:"https://youtube.com/watch?v=...",helperText:"YouTube or video URL"})]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"Additional Information"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsx(x,{label:"Tags",name:"tags",value:s.tags,onChange:t=>r("tags",t.target.value),error:i.tags,placeholder:"tag1, tag2, tag3",helperText:"Separate tags with commas"}),e.jsxs(k,{label:"Author",name:"author_uid",value:s.author_uid,onChange:t=>r("author_uid",t.target.value),error:i.author_uid,children:[e.jsx("option",{value:"",children:"Select Author (Optional)"}),f.map(t=>e.jsx("option",{value:t.uid,children:t.full_name},t.uid))]}),e.jsxs(k,{label:"Editor",name:"editor_uid",value:s.editor_uid,onChange:t=>r("editor_uid",t.target.value),error:i.editor_uid,children:[e.jsx("option",{value:"",children:"Select Editor (Optional)"}),f.map(t=>e.jsx("option",{value:t.uid,children:t.full_name},t.uid))]})]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"SEO Configuration"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(x,{label:"URL Slug",name:"slug",value:s.slug,onChange:t=>r("slug",t.target.value),error:i.slug,placeholder:"article-url-slug",helperText:"Auto-generated from title, but you can customize it"})}),e.jsx(x,{label:"SEO Meta Title",name:"meta_title",value:s.meta_title,onChange:t=>r("meta_title",t.target.value),error:i.meta_title,placeholder:"Custom title for search engines"}),e.jsxs("div",{children:[e.jsx(O,{label:"SEO Meta Description",name:"meta_description",value:s.meta_description,onChange:t=>r("meta_description",t.target.value),error:i.meta_description,placeholder:"Description for search engines",rows:3}),e.jsxs("div",{className:"flex items-center justify-between mt-1 text-xs",children:[e.jsxs("span",{className:v>=110&&v<=155?"text-green-600":"text-gray-500",children:[v," characters"]}),e.jsx("span",{className:"text-gray-500",children:"Recommended: 110-155 characters"})]})]}),e.jsx(x,{label:"SEO Meta Keywords",name:"meta_keywords",value:s.meta_keywords,onChange:t=>r("meta_keywords",t.target.value),error:i.meta_keywords,placeholder:"keyword1, keyword2, keyword3"}),e.jsx(x,{label:"Focus Keyword",name:"focus_keywords",value:s.focus_keywords,onChange:t=>r("focus_keywords",t.target.value),error:i.focus_keywords,placeholder:"Main keyword for SEO analysis",helperText:"Primary keyword you want to rank for"})]})]}),e.jsxs(d,{children:[e.jsx(u,{children:e.jsx(m,{children:"Publishing Options"})}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs(k,{label:"Status",name:"status",required:!0,value:s.status,onChange:t=>r("status",t.target.value),error:i.status,children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Publish Now"}),e.jsx("option",{value:"scheduled",children:"Schedule"})]}),s.status==="scheduled"&&e.jsxs("div",{children:[e.jsx(L,{required:!0,children:"Scheduled Date & Time"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"datetime-local",value:s.scheduled_at,onChange:t=>r("scheduled_at",t.target.value),className:"flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm"})}),i.scheduled_at&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:i.scheduled_at})]}),s.status==="published"&&e.jsxs(B,{variant:"default",className:"bg-green-50 border-green-200",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx("p",{className:"text-sm text-green-800",children:"This article will be published immediately upon saving."})]})]})]}),e.jsx(d,{children:e.jsxs(o,{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(A,{href:"/admin/articles",children:e.jsx(T,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(T,{type:"submit",disabled:h,children:h?"Saving...":c?"Update Article":"Create Article"})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"sticky top-6",children:e.jsx(K,{title:s.title,subtitle:s.subtitle,slug:s.slug,content:s.content,metaTitle:s.meta_title,metaDescription:s.meta_description,metaKeywords:s.meta_keywords,focusKeyword:s.focus_keywords,tags:s.tags})})})]})}),e.jsx(H,{open:C,onClose:()=>p(!1),onSelect:l,multiple:!1,accept:"image",folder:"articles"})]})}export{ie as default};
