import{d as C,j as e,L as P,P as T,S as I,z as v,X as N,e as x}from"./vendor-CGGQDrpY.js";import{A as V}from"./AdminLayout-Q6Po-ppz.js";import{B as l}from"./Button-DtLeDkBC.js";import{I as z}from"./Input-vqcA0MAI.js";import{B as d}from"./Badge-Cq8sI8zv.js";import{C as w,a as E,b as H,c as D}from"./Card-B72U85z3.js";import{D as O,a as R,b as X,c as _,d as $,e as q}from"./Dialog-Be0ftsTY.js";import{D as b,a as S,b as y,c as k,d as F,e as m}from"./dropdown-menu-CYqC-BQh.js";import{D as G}from"./DataTable-HL7c0WNj.js";import{L as J}from"./LaravelPagination-DQozvNKl.js";import{createColumns as K}from"./columns-DAxNV1J7.js";import"./Table-DAe2bP2c.js";import"./Pagination-CmKTazYe.js";function ce({articles:o,categories:j,filters:n}){const[p,i]=C.useState(null),[a,g]=C.useState({categories:n?.categories?n.categories.split(",").filter(Boolean):[],statuses:n?.statuses?n.statuses.split(",").filter(Boolean):[],search:n?.search||""}),A=s=>{x.delete(`/admin/articles/${s}`,{onSuccess:()=>i(null)})},h=(s,r)=>{const t={...a,[s]:r};g(t);const c={search:t.search,categories:t.categories.join(","),statuses:t.statuses.join(",")};x.get("/admin/articles",c,{preserveState:!0,preserveScroll:!0})},u=(s,r)=>{const t=a[s],c=t.includes(r)?t.filter(B=>B!==r):[...t,r];h(s,c)},f=(s,r)=>{const t=a[s].filter(c=>c!==r);h(s,t)},L=()=>{g({categories:[],statuses:[],search:""}),x.get("/admin/articles",{},{preserveState:!0,preserveScroll:!0})},M=K(i);return e.jsxs(V,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Articles"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage blog articles and content"})]}),e.jsx(l,{asChild:!0,children:e.jsxs(P,{href:"/admin/articles/create",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Add Article"]})})]}),e.jsxs(w,{children:[e.jsx(E,{children:e.jsx(H,{children:"Filters"})}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(z,{type:"text",placeholder:"Search by title or excerpt...",value:a.search,onChange:s=>h("search",s.target.value),className:"pl-10"})]})}),e.jsxs(b,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Category",a.categories.length>0&&e.jsx(d,{variant:"secondary",className:"ml-1 rounded-full px-1.5 py-0",children:a.categories.length})]})}),e.jsxs(y,{align:"end",className:"w-48",children:[e.jsx(k,{children:"Filter by Category"}),e.jsx(F,{}),j.map(s=>e.jsx(m,{checked:a.categories.includes(s.uid),onCheckedChange:()=>u("categories",s.uid),children:s.name},s.uid))]})]}),e.jsxs(b,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Status",a.statuses.length>0&&e.jsx(d,{variant:"secondary",className:"ml-1 rounded-full px-1.5 py-0",children:a.statuses.length})]})}),e.jsxs(y,{align:"end",className:"w-48",children:[e.jsx(k,{children:"Filter by Status"}),e.jsx(F,{}),e.jsx(m,{checked:a.statuses.includes("published"),onCheckedChange:()=>u("statuses","published"),children:"Published"}),e.jsx(m,{checked:a.statuses.includes("draft"),onCheckedChange:()=>u("statuses","draft"),children:"Draft"})]})]})]}),(a.categories.length>0||a.statuses.length>0||a.search)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),a.categories.map(s=>{const r=j.find(t=>t.uid===s);return r?e.jsxs(d,{variant:"secondary",className:"gap-1",children:["Category: ",r.name,e.jsx("button",{onClick:()=>f("categories",s),className:"ml-1 hover:text-destructive",children:e.jsx(N,{className:"h-3 w-3"})})]},s):null}),a.statuses.map(s=>e.jsxs(d,{variant:"secondary",className:"gap-1",children:["Status: ",s.charAt(0).toUpperCase()+s.slice(1),e.jsx("button",{onClick:()=>f("statuses",s),className:"ml-1 hover:text-destructive",children:e.jsx(N,{className:"h-3 w-3"})})]},s)),e.jsx(l,{variant:"ghost",size:"sm",onClick:L,className:"h-6 px-2 text-xs",children:"Clear all"})]})]})})]}),e.jsx(w,{children:e.jsx(D,{className:"pt-6",children:e.jsx(G,{columns:M,data:o.data||[]})})}),o.data&&o.data.length>0&&e.jsx(J,{data:o})]}),e.jsx(O,{open:!!p,onOpenChange:s=>!s&&i(null),children:e.jsxs(R,{onClose:()=>i(null),children:[e.jsxs(X,{children:[e.jsx(_,{children:"Delete Article"}),e.jsx($,{children:"Are you sure you want to delete this article? This action cannot be undone."})]}),e.jsxs(q,{children:[e.jsx(l,{variant:"outline",onClick:()=>i(null),children:"Cancel"}),e.jsx(l,{variant:"destructive",onClick:()=>A(p),children:"Delete"})]})]})})]})}export{ce as default};
