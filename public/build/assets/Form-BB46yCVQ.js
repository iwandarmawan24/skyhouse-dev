import{f as C,d as m,j as e,L as y,X as j,I as F,P}from"./vendor-BnbgrNvg.js";import{A as I}from"./AdminLayout-sVT0_NAf.js";import{M as S}from"./MediaPicker-Bs1F3hOt.js";import{R as L}from"./RichTextEditor-C15quRD8.js";import"./Button-C9qRTbX8.js";import"./Input-BiTaUmO9.js";import"./Dialog-DwNRdUFJ.js";function B({product:a}){const d=a!==null,{data:t,setData:s,post:v,processing:g,errors:l}=C({name:a?.name||"",type:a?.type||"house",description:a?.description||"",price:a?.price||"",land_area:a?.land_area||"",building_area:a?.building_area||"",bedrooms:a?.bedrooms||"",bathrooms:a?.bathrooms||"",floors:a?.floors||"",garage:a?.garage||"",location:a?.location||"",city:a?.city||"",province:a?.province||"",latitude:a?.latitude||"",longitude:a?.longitude||"",video_url:a?.video_url||"",video_360_url:a?.video_360_url||"",is_featured:a?.is_featured??!1,is_sold:a?.is_sold??!1,is_active:a?.is_active??!0,featured_image_uid:a?.featured_image_uid||null,gallery_uids:a?.gallery_uids||[],_method:d?"PUT":"POST"}),[N,n]=m.useState(!1),[p,b]=m.useState("featured"),[c,h]=m.useState(a?.featured_image||null),[x,f]=m.useState(a?.gallery_images||[]),w=r=>{r.preventDefault();const o=d?`/admin/products/${a.uid}`:"/admin/products";v(o)},_=r=>r?new Intl.NumberFormat("id-ID").format(r):"";return e.jsxs(I,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(y,{href:"/admin/products",className:"text-gray-600 hover:text-gray-900",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:d?"Edit Product":"Create New Product"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:d?"Update the product details below":"Fill in the form to add a new product"})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",type:"text",value:t.name,onChange:r=>s("name",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.name?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter property name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"type",value:t.type,onChange:r=>s("type",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.type?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"land",children:"Land"})]}),l.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.type})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price (IDR) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"price",type:"number",value:t.price,onChange:r=>s("price",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.price?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"0"}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.price}),t.price&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[_(t.price)," IDR"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(L,{value:t.description,onChange:r=>s("description",r),placeholder:"Enter property description",error:l.description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"land_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Land Area (m²)"}),e.jsx("input",{id:"land_area",type:"number",step:"0.01",value:t.land_area,onChange:r=>s("land_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Building Area (m²)"}),e.jsx("input",{id:"building_area",type:"number",step:"0.01",value:t.building_area,onChange:r=>s("building_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),e.jsx("input",{id:"bedrooms",type:"number",value:t.bedrooms,onChange:r=>s("bedrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms"}),e.jsx("input",{id:"bathrooms",type:"number",value:t.bathrooms,onChange:r=>s("bathrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"floors",className:"block text-sm font-medium text-gray-700 mb-2",children:"Floors"}),e.jsx("input",{id:"floors",type:"number",value:t.floors,onChange:r=>s("floors",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"garage",className:"block text-sm font-medium text-gray-700 mb-2",children:"Garage"}),e.jsx("input",{id:"garage",type:"number",value:t.garage,onChange:r=>s("garage",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"location",type:"text",value:t.location,onChange:r=>s("location",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.location?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter full address"}),l.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.location})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"city",type:"text",value:t.city,onChange:r=>s("city",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.city?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter city"}),l.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-2",children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"province",type:"text",value:t.province,onChange:r=>s("province",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${l.province?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter province"}),l.province&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.province})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),e.jsx("input",{id:"latitude",type:"number",step:"any",value:t.latitude,onChange:r=>s("latitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-6.200000"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),e.jsx("input",{id:"longitude",type:"number",step:"any",value:t.longitude,onChange:r=>s("longitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"106.816666"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Images"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),c?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:c.url||c.thumbnail_url,alt:c.alt_text||"Featured Image",className:"w-48 h-48 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{h(null),s("featured_image_uid",null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition",children:e.jsx(j,{className:"h-4 w-4"})})]}):e.jsxs("button",{type:"button",onClick:()=>{b("featured"),n(!0)},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 w-48 h-48 flex flex-col items-center justify-center hover:border-blue-500 transition-colors group",children:[e.jsx(F,{className:"h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 group-hover:text-blue-600",children:"Select Image"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gallery Images"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[x.map((r,o)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.thumbnail_url||r.url,alt:r.alt_text||`Gallery ${o+1}`,className:"w-full aspect-square object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{const i=x.filter((u,k)=>k!==o);f(i),s("gallery_uids",i.map(u=>u.uid))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 opacity-0 group-hover:opacity-100 transition",children:e.jsx(j,{className:"h-4 w-4"})})]},r.uid||o)),e.jsxs("button",{type:"button",onClick:()=>{b("gallery"),n(!0)},className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors group",children:[e.jsx(P,{className:"h-8 w-8 text-gray-400 group-hover:text-blue-500 transition-colors"}),e.jsx("p",{className:"text-xs text-gray-600 group-hover:text-blue-600 mt-1",children:"Add Images"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Media Links (Optional)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),e.jsx("input",{id:"video_url",type:"url",value:t.video_url,onChange:r=>s("video_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://youtube.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_360_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"360° Video URL"}),e.jsx("input",{id:"video_360_url",type:"url",value:t.video_360_url,onChange:r=>s("video_360_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_featured,onChange:r=>s("is_featured",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Featured Product"})]})}),d&&e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_sold,onChange:r=>s("is_sold",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Mark as Sold"})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.is_active,onChange:r=>s("is_active",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Active"})]})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(y,{href:"/admin/products",className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":d?"Update Product":"Create Product"})]})})]}),e.jsx(S,{open:N,onClose:()=>n(!1),onSelect:r=>{if(p==="featured")h(r),s("featured_image_uid",r.uid);else{const o=Array.isArray(r)?r:[r],i=[...x,...o];f(i),s("gallery_uids",i.map(u=>u.uid))}n(!1)},multiple:p==="gallery",accept:"image",folder:"products"})]})}export{B as default};
