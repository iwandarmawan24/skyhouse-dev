import{f as C,d as w,j as e,L as o,A,y as P}from"./vendor-ERzRPhBn.js";import{A as F}from"./AdminLayout-BzYBBHe-.js";import{B as g}from"./Button-DKkj-eXv.js";import{C as u,a as p,b as j,c as h}from"./Card-BAS-lTRp.js";import{F as b,b as I}from"./FormField-ihUe6A9s.js";import{L as f}from"./Label-bwIrahzs.js";import"./Input-6qSCy0Tm.js";import"./Textarea-B7f3HXiN.js";import"./Select-PcpVC9Lh.js";function L({highlight:t,mediaList:l}){const i=t!==null,{data:n,setData:s,post:v,processing:x,errors:r}=C({media_uid:t?.media_uid||(l.length>0?l[0].uid:""),title:t?.title||"",publish_date:t?.publish_date||"",image:null,article_url:t?.article_url||"",_method:i?"PUT":"POST"}),[m,N]=w.useState(t?.image?t.image.startsWith("http")?t.image:`/storage/${t.image}`:null),y=a=>{const d=a.target.files[0];if(d){s("image",d);const c=new FileReader;c.onloadend=()=>{N(c.result)},c.readAsDataURL(d)}},_=a=>{a.preventDefault();const d=i?`/admin/media-highlights/${t.uid}`:"/admin/media-highlights";v(d)};return e.jsxs(F,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(o,{href:"/admin/media-highlights",className:"text-gray-600 hover:text-gray-900",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i?"Edit Media Highlight":"Add New Media Highlight"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:i?"Update media highlight information":"Add external news article or media coverage"})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6 max-w-2xl",children:[e.jsxs(u,{children:[e.jsx(p,{children:e.jsx(j,{children:"Article Information"})}),e.jsxs(h,{className:"space-y-6",children:[e.jsx(b,{label:"Article Title",name:"title",required:!0,value:n.title,onChange:a=>s("title",a.target.value),error:r.title,placeholder:"Enter the article title"}),e.jsx(I,{label:"Media Outlet",name:"media_uid",required:!0,value:n.media_uid,onChange:a=>s("media_uid",a.target.value),error:r.media_uid,children:l.length>0?l.map(a=>e.jsx("option",{value:a.uid,children:a.name},a.uid)):e.jsx("option",{value:"",children:"No media outlets available"})}),l.length===0&&e.jsxs("p",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-lg p-3",children:["Please create a media outlet first before adding highlights."," ",e.jsx(o,{href:"/admin/media/create",className:"underline font-medium",children:"Create Media Outlet"})]}),e.jsxs("div",{children:[e.jsx(f,{required:!0,children:"Publish Date"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{type:"date",value:n.publish_date,onChange:a=>s("publish_date",a.target.value),className:"flex h-10 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm",required:!0})}),r.publish_date&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:r.publish_date})]}),e.jsx(b,{label:"Article URL",name:"article_url",type:"url",required:!0,value:n.article_url,onChange:a=>s("article_url",a.target.value),error:r.article_url,placeholder:"https://example.com/article",helperText:"Full URL to the external article"})]})]}),e.jsxs(u,{children:[e.jsx(p,{children:e.jsx(j,{children:"Article Image"})}),e.jsx(h,{children:e.jsxs("div",{children:[e.jsx(f,{required:!0,children:"Image"}),e.jsxs("div",{className:"mt-2",children:[m&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:m,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"})}),e.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:y,className:"hidden"}),e.jsxs("label",{htmlFor:"image",className:"inline-flex items-center justify-center gap-2 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 rounded-lg cursor-pointer transition-colors font-medium text-sm",children:[e.jsx(P,{className:"w-4 h-4"}),m?"Change Image":"Upload Image"]}),r.image&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:r.image}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Article thumbnail or cover image (JPG, PNG, WebP, max 2MB)"})]})]})})]}),e.jsx(u,{children:e.jsxs(h,{className:"flex items-center justify-end gap-4 pt-6",children:[e.jsx(o,{href:"/admin/media-highlights",children:e.jsx(g,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(g,{type:"submit",disabled:x||l.length===0,children:x?"Saving...":i?"Update Highlight":"Create Highlight"})]})})]})]})}export{L as default};
