import{f as k,d as p,j as e,L as u}from"./vendor-BnbgrNvg.js";import{A as C}from"./AdminLayout-sVT0_NAf.js";import"./Button-C9qRTbX8.js";import"./Input-BiTaUmO9.js";function _({facility:i}){const n=i!==null,{data:r,setData:l,post:b,processing:g,errors:a}=k({name:i?.name||"",description:i?.description||"",icon:i?.icon||"",is_active:i?.is_active??!0,images:[],deleted_images:[],_method:n?"PUT":"POST"}),[c,f]=p.useState(i?.images||[]),[o,h]=p.useState([]),j=s=>{const t=Array.from(s.target.files);if(t.length>0){l("images",[...r.images,...t]);const d=t.map(m=>new Promise(w=>{const x=new FileReader;x.onloadend=()=>w(x.result),x.readAsDataURL(m)}));Promise.all(d).then(m=>{h([...o,...m])})}},v=s=>{const t=[...r.images];t.splice(s,1),l("images",t);const d=[...o];d.splice(s,1),h(d)},N=s=>{f(c.filter(t=>t.id!==s)),l("deleted_images",[...r.deleted_images,s])},y=s=>{s.preventDefault();const t=n?`/admin/facilities/${i.uid}`:"/admin/facilities";b(t)};return e.jsxs(C,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(u,{href:"/admin/facilities",className:"text-gray-600 hover:text-gray-900",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n?"Edit Facility":"Create New Facility"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:n?"Update the facility details below":"Fill in the form to add a new facility"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Facility Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",type:"text",value:r.name,onChange:s=>l("name",s.target.value),className:`w-full px-4 py-2 rounded-lg border ${a.name?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"e.g., Swimming Pool, Gym, Garden"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",value:r.description,onChange:s=>l("description",s.target.value),rows:5,className:`w-full px-4 py-2 rounded-lg border ${a.description?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Describe the facility and its features"}),a.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"icon",className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon (Optional)"}),e.jsx("input",{id:"icon",type:"text",value:r.icon,onChange:s=>l("icon",s.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., pool, gym, garden"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Icon identifier for frontend display"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Image Gallery"}),n&&c.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Current Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s.image_path.startsWith("http")?s.image_path:`/storage/${s.image_path}`,alt:"Facility",className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>N(s.id),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s.id))})]}),o.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>v(t),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t))})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"images",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, JPEG or WEBP (MAX. 2MB each)"})]}),e.jsx("input",{id:"images",type:"file",className:"hidden",accept:"image/jpeg,image/png,image/jpg,image/webp",multiple:!0,onChange:j})]})}),a.images&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.images})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.is_active,onChange:s=>l("is_active",s.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:r.is_active?"Active":"Inactive"})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(u,{href:"/admin/facilities",className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":n?"Update Facility":"Create Facility"})]})})]})]})}export{_ as default};
