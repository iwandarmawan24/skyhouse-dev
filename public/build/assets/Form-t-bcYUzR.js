import{af as J,d as c,j as e,ag as V,ah as q,ai as H,S as X,aj as E,t as T,a4 as K,y as Q,a as G,ab as Y,ac as Z,ad as ee,f as re,L as W,X as O,P as se}from"./vendor-CGGQDrpY.js";import{A as ae}from"./AdminLayout-DLF7mYPY.js";import{D as te,a as le,b as ie,c as de,e as oe}from"./Dialog-Be0ftsTY.js";import{c as S,B as U}from"./Button-DtLeDkBC.js";import{I as ne}from"./Input-vqcA0MAI.js";const ce=J,z=c.forwardRef(({className:s,...m},l)=>e.jsx(V,{ref:l,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...m}));z.displayName=V.displayName;const B=c.forwardRef(({className:s,...m},l)=>e.jsx(q,{ref:l,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...m}));B.displayName=q.displayName;const R=c.forwardRef(({className:s,...m},l)=>e.jsx(H,{ref:l,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...m}));R.displayName=H.displayName;function me({open:s,onClose:m,onSelect:l,multiple:t=!1,accept:w="image",folder:y=null}){const[i,j]=c.useState("library"),[P,f]=c.useState([]),[u,v]=c.useState(t?[]:null),[h,k]=c.useState(!1),[N,b]=c.useState(!1),[p,_]=c.useState(""),[C,L]=c.useState(1),[M,A]=c.useState(!1),F=async(a="",o=1)=>{k(!0);try{const n=await G.get("/admin/media-library/picker",{params:{type:w,search:a,folder:y,page:o}});n.data.success&&(f(o===1?n.data.media.data:$=>[...$,...n.data.media.data]),A(n.data.media.current_page<n.data.media.last_page),L(o))}catch(n){console.error("Failed to load media:",n)}finally{k(!1)}};c.useEffect(()=>{s&&F(p,1)},[s,p]);const I=async a=>{if(!a||a.length===0)return;b(!0);const o=new FormData;Array.from(a).forEach(n=>{o.append("files[]",n)}),y&&o.append("folder",y);try{const n=await G.post("/admin/media-library/upload",o,{headers:{"Content-Type":"multipart/form-data"}});n.data.success&&(await F(p,1),j("library"),!t&&n.data.media.length===1&&v(n.data.media[0]))}catch(n){console.error("Upload failed:",n),alert("Upload failed. Please try again.")}finally{b(!1)}},r=a=>{v(t?o=>{const n=Array.isArray(o)?o:[];return n.some(D=>D.uid===a.uid)?n.filter(D=>D.uid!==a.uid):[...n,a]}:o=>o?.uid===a.uid?null:a)},d=a=>t?Array.isArray(u)&&u.some(o=>o.uid===a.uid):u?.uid===a.uid,x=()=>{l(u),m(),v(t?[]:null)},g=a=>{switch(a){case"image":return T;case"video":return ee;case"document":return Z;default:return Y}};return e.jsx(te,{open:s,onOpenChange:m,children:e.jsxs(le,{className:"max-w-5xl h-[80vh] flex flex-col p-0",children:[e.jsx(ie,{className:"px-6 py-4 border-b",children:e.jsx(de,{children:"Select Media"})}),e.jsxs(ce,{value:i,onValueChange:j,className:"flex-1 flex flex-col",children:[e.jsxs(z,{className:"px-6 border-b rounded-none bg-transparent",children:[e.jsx(B,{value:"library",children:"Media Library"}),e.jsx(B,{value:"upload",children:"Upload Files"})]}),e.jsxs(R,{value:"library",className:"flex-1 flex flex-col px-6 py-4 overflow-hidden",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ne,{placeholder:"Search media...",value:p,onChange:a=>_(a.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h&&C===1?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):P.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(T,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No media found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload files to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-4 gap-4",children:P.map(a=>{const o=g(a.file_type);return e.jsxs("div",{onClick:()=>r(a),className:S("relative aspect-square rounded-lg border-2 overflow-hidden cursor-pointer transition-all hover:shadow-md",d(a)?"border-primary ring-2 ring-primary ring-offset-2":"border-border hover:border-primary/50"),children:[a.file_type==="image"?e.jsx("img",{src:a.thumbnail_url,alt:a.alt_text||a.filename,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:e.jsx(o,{className:"h-12 w-12 text-muted-foreground"})}),d(a)&&e.jsx("div",{className:"absolute inset-0 bg-primary/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-primary text-primary-foreground rounded-full p-2",children:e.jsx(K,{className:"h-6 w-6"})})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:[e.jsx("p",{className:"text-white text-xs truncate",children:a.filename}),e.jsx("p",{className:"text-white/70 text-xs",children:a.file_size_human})]})]},a.uid)})}),M&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx(U,{variant:"outline",onClick:()=>F(p,C+1),disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Load More"})})]})})]}),e.jsx(R,{value:"upload",className:"flex-1 px-6 py-4",children:e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-12 text-center",children:[e.jsx("input",{type:"file",id:"media-upload",multiple:!0,accept:w==="image"?"image/*":w==="video"?"video/*":"*",onChange:a=>I(a.target.files),className:"hidden",disabled:N}),e.jsxs("label",{htmlFor:"media-upload",className:"cursor-pointer",children:[N?e.jsx(E,{className:"h-16 w-16 mx-auto text-muted-foreground animate-spin mb-4"}):e.jsx(Q,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:N?"Uploading...":"Drop files to upload"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"or click to select files"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Maximum file size: 10MB"})]})]})})]}),e.jsx(oe,{className:"px-6 py-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:t&&Array.isArray(u)&&u.length>0&&e.jsxs("span",{children:[u.length," item(s) selected"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{variant:"outline",onClick:m,children:"Cancel"}),e.jsx(U,{onClick:x,disabled:t?Array.isArray(u)?u.length===0:!0:!u,children:"Insert Selected"})]})]})})]})})}function fe({product:s}){const m=s!==null,{data:l,setData:t,post:w,processing:y,errors:i}=re({name:s?.name||"",type:s?.type||"house",description:s?.description||"",price:s?.price||"",land_area:s?.land_area||"",building_area:s?.building_area||"",bedrooms:s?.bedrooms||"",bathrooms:s?.bathrooms||"",floors:s?.floors||"",garage:s?.garage||"",location:s?.location||"",city:s?.city||"",province:s?.province||"",latitude:s?.latitude||"",longitude:s?.longitude||"",video_url:s?.video_url||"",video_360_url:s?.video_360_url||"",is_featured:s?.is_featured??!1,is_sold:s?.is_sold??!1,is_active:s?.is_active??!0,featured_image_uid:s?.featured_image_uid||null,gallery_uids:s?.gallery_uids||[],images:[],deleted_images:[],_method:m?"PUT":"POST"}),[j,P]=c.useState(s?.images||[]),[f,u]=c.useState([]),[v,h]=c.useState(!1),[k,N]=c.useState("featured"),[b,p]=c.useState(s?.featured_image||null),[_,C]=c.useState(s?.gallery_images||[]),L=r=>{const d=Array.from(r.target.files);if(d.length>0){t("images",[...l.images,...d]);const x=d.map(g=>new Promise(a=>{const o=new FileReader;o.onloadend=()=>a(o.result),o.readAsDataURL(g)}));Promise.all(x).then(g=>{u([...f,...g])})}},M=r=>{const d=[...l.images];d.splice(r,1),t("images",d);const x=[...f];x.splice(r,1),u(x)},A=r=>{P(j.filter(d=>d.id!==r)),t("deleted_images",[...l.deleted_images,r])},F=r=>{r.preventDefault();const d=m?`/admin/products/${s.uid}`:"/admin/products";w(d)},I=r=>r?new Intl.NumberFormat("id-ID").format(r):"";return e.jsxs(ae,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx(W,{href:"/admin/products",className:"text-gray-600 hover:text-gray-900",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Edit Product":"Create New Product"})]}),e.jsx("p",{className:"text-gray-600 ml-10",children:m?"Update the product details below":"Fill in the form to add a new product"})]}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",type:"text",value:l.name,onChange:r=>t("name",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.name?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter property name"}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:["Property Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{id:"type",value:l.type,onChange:r=>t("type",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.type?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,children:[e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"land",children:"Land"})]}),i.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.type})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:["Price (IDR) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"price",type:"number",value:l.price,onChange:r=>t("price",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.price?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"0"}),i.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.price}),l.price&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[I(l.price)," IDR"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"description",value:l.description,onChange:r=>t("description",r.target.value),rows:6,className:`w-full px-4 py-2 rounded-lg border ${i.description?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter property description"}),i.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"land_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Land Area (m²)"}),e.jsx("input",{id:"land_area",type:"number",step:"0.01",value:l.land_area,onChange:r=>t("land_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"building_area",className:"block text-sm font-medium text-gray-700 mb-2",children:"Building Area (m²)"}),e.jsx("input",{id:"building_area",type:"number",step:"0.01",value:l.building_area,onChange:r=>t("building_area",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bedrooms"}),e.jsx("input",{id:"bedrooms",type:"number",value:l.bedrooms,onChange:r=>t("bedrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bathrooms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Bathrooms"}),e.jsx("input",{id:"bathrooms",type:"number",value:l.bathrooms,onChange:r=>t("bathrooms",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"floors",className:"block text-sm font-medium text-gray-700 mb-2",children:"Floors"}),e.jsx("input",{id:"floors",type:"number",value:l.floors,onChange:r=>t("floors",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"garage",className:"block text-sm font-medium text-gray-700 mb-2",children:"Garage"}),e.jsx("input",{id:"garage",type:"number",value:l.garage,onChange:r=>t("garage",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"location",type:"text",value:l.location,onChange:r=>t("location",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.location?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter full address"}),i.location&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.location})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-2",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"city",type:"text",value:l.city,onChange:r=>t("city",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.city?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter city"}),i.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.city})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"province",className:"block text-sm font-medium text-gray-700 mb-2",children:["Province ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"province",type:"text",value:l.province,onChange:r=>t("province",r.target.value),className:`w-full px-4 py-2 rounded-lg border ${i.province?"border-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent`,placeholder:"Enter province"}),i.province&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.province})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"latitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),e.jsx("input",{id:"latitude",type:"number",step:"any",value:l.latitude,onChange:r=>t("latitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-6.200000"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"longitude",className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),e.jsx("input",{id:"longitude",type:"number",step:"any",value:l.longitude,onChange:r=>t("longitude",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"106.816666"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Media Library"}),e.jsx("span",{className:"text-sm text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"New Feature"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),b?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:b.url||b.thumbnail_url,alt:b.alt_text||"Featured Image",className:"w-48 h-48 object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{p(null),t("featured_image_uid",null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 transition",children:e.jsx(O,{className:"h-4 w-4"})})]}):e.jsxs("button",{type:"button",onClick:()=>{N("featured"),h(!0)},className:"border-2 border-dashed border-gray-300 rounded-lg p-8 w-48 h-48 flex flex-col items-center justify-center hover:border-blue-500 transition-colors group",children:[e.jsx(T,{className:"h-12 w-12 text-gray-400 group-hover:text-blue-500 transition-colors"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 group-hover:text-blue-600",children:"Select Image"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gallery Images"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[_.map((r,d)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.thumbnail_url||r.url,alt:r.alt_text||`Gallery ${d+1}`,className:"w-full aspect-square object-cover rounded-lg border-2 border-gray-300"}),e.jsx("button",{type:"button",onClick:()=>{const x=_.filter((g,a)=>a!==d);C(x),t("gallery_uids",x.map(g=>g.uid))},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1.5 hover:bg-red-600 opacity-0 group-hover:opacity-100 transition",children:e.jsx(O,{className:"h-4 w-4"})})]},r.uid||d)),e.jsxs("button",{type:"button",onClick:()=>{N("gallery"),h(!0)},className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center hover:border-blue-500 transition-colors group",children:[e.jsx(se,{className:"h-8 w-8 text-gray-400 group-hover:text-blue-500 transition-colors"}),e.jsx("p",{className:"text-xs text-gray-600 group-hover:text-blue-600 mt-1",children:"Add Images"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Images (Old Upload)"}),e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"Legacy"})]}),m&&j.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Current Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:j.map(r=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r.image_path.startsWith("http")?r.image_path:`/storage/${r.image_path}`,alt:"Product",className:"w-full h-32 object-cover rounded-lg"}),r.is_primary&&e.jsx("span",{className:"absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded",children:"Primary"}),e.jsx("button",{type:"button",onClick:()=>A(r.id),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},r.id))})]}),f.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"New Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map((r,d)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:`Preview ${d+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>M(d),className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white p-1 rounded opacity-0 group-hover:opacity-100 transition",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},d))})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"images",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, JPEG or WEBP (MAX. 2MB each)"})]}),e.jsx("input",{id:"images",type:"file",className:"hidden",accept:"image/jpeg,image/png,image/jpg,image/webp",multiple:!0,onChange:L})]})}),i.images&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.images})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Media Links (Optional)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL"}),e.jsx("input",{id:"video_url",type:"url",value:l.video_url,onChange:r=>t("video_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://youtube.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"video_360_url",className:"block text-sm font-medium text-gray-700 mb-2",children:"360° Video URL"}),e.jsx("input",{id:"video_360_url",type:"url",value:l.video_360_url,onChange:r=>t("video_360_url",r.target.value),className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.is_featured,onChange:r=>t("is_featured",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Featured Product"})]})}),m&&e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.is_sold,onChange:r=>t("is_sold",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Mark as Sold"})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.is_active,onChange:r=>t("is_active",r.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700",children:"Active"})]})})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx(W,{href:"/admin/products",className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":m?"Update Product":"Create Product"})]})})]}),e.jsx(me,{open:v,onClose:()=>h(!1),onSelect:r=>{if(k==="featured")p(r),t("featured_image_uid",r.uid);else{const d=Array.isArray(r)?r:[r],x=[..._,...d];C(x),t("gallery_uids",x.map(g=>g.uid))}h(!1)},multiple:k==="gallery",accept:"image",folder:"products"})]})}export{fe as default};
