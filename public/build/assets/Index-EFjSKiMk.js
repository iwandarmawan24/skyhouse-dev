import{u as C,d as j,j as e,L as d,P as p,S as D,b6 as w,e as o}from"./vendor-BnbgrNvg.js";import{A}from"./AdminLayout-sVT0_NAf.js";import{B as a}from"./Button-C9qRTbX8.js";import{I as T}from"./Input-BiTaUmO9.js";import"./Textarea-CzbTjwCv.js";import{B as m}from"./Badge-C1TDCZWx.js";import{C as f}from"./Card-Dup5Ukx4.js";import{A as g}from"./Alert-eEaMtgZF.js";import{T as U,a as k,b as v,c as r,d as B,e as t}from"./Table-G1IrKxy8.js";import{D as P,a as E,b as I,c as H,d as L,e as R}from"./Dialog-DwNRdUFJ.js";import"./Form-CRyh3_3G.js";import{P as _}from"./Pagination-CjnCdGXL.js";import"./Label-D-CdDNeh.js";function X({users:c,filters:N}){const{flash:i,auth:h}=C().props,[x,l]=j.useState(null),[n,u]=j.useState(N.search||""),y=s=>{o.delete(`/admin/users/${s}`,{onSuccess:()=>l(null)})},b=s=>{s.preventDefault(),o.get("/admin/users",{search:n},{preserveState:!0,preserveScroll:!0})},S=()=>{u(""),o.get("/admin/users",{},{preserveState:!0,preserveScroll:!0})};return e.jsxs(A,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Users Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage admin users and their access"})]}),e.jsx(d,{href:"/admin/users/create",children:e.jsxs(a,{children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Add New User"]})})]}),i.success&&e.jsx(g,{variant:"success",className:"mb-6",children:i.success}),i.error&&e.jsx(g,{variant:"destructive",className:"mb-6",children:i.error}),e.jsx(f,{className:"mb-6 p-4",children:e.jsxs("form",{onSubmit:b,className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsx(T,{type:"text",placeholder:"Search by name or email...",value:n,onChange:s=>u(s.target.value),className:"pl-10"})]}),e.jsx(a,{type:"submit",children:"Search"}),n&&e.jsx(a,{type:"button",variant:"secondary",onClick:S,children:"Clear"})]})}),e.jsx(f,{children:c.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(k,{children:e.jsxs(v,{children:[e.jsx(r,{children:"User"}),e.jsx(r,{children:"Username"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Role"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(B,{children:c.data.map(s=>e.jsxs(v,{children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-semibold shrink-0",children:s.full_name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.full_name}),s.uid===h.user.uid&&e.jsx(m,{variant:"default",children:"You"})]})]})}),e.jsxs(t,{className:"text-gray-600",children:["@",s.username]}),e.jsx(t,{className:"text-gray-900",children:s.email}),e.jsx(t,{children:e.jsx(m,{variant:s.role==="superadmin"?"default":"secondary",children:s.role==="superadmin"?"Super Admin":"Staff"})}),e.jsx(t,{children:e.jsx(m,{variant:s.status==="active"?"success":"destructive",children:s.status==="active"?"Active":"Inactive"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(d,{href:`/admin/users/${s.uid}/edit`,children:e.jsx(a,{variant:"ghost",size:"sm",children:"Edit"})}),s.uid!==h.user.uid&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>l(s.uid),className:"text-red-600 hover:text-red-900 hover:bg-red-50",children:"Delete"})]})})]},s.uid))})]}),e.jsx(_,{data:c})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n?"Try adjusting your search":"Get started by creating a new user."}),!n&&e.jsx("div",{className:"mt-6",children:e.jsx(d,{href:"/admin/users/create",children:e.jsxs(a,{children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Add New User"]})})})]})}),e.jsx(P,{open:!!x,onOpenChange:()=>l(null),children:e.jsxs(E,{onClose:()=>l(null),children:[e.jsxs(I,{children:[e.jsx(H,{children:"Delete User"}),e.jsx(L,{children:"Are you sure you want to delete this user? This action cannot be undone."})]}),e.jsxs(R,{children:[e.jsx(a,{variant:"secondary",onClick:()=>l(null),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:()=>y(x),children:"Delete"})]})]})})]})}export{X as default};
